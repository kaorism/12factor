## III. Config
### เก็บค่าคอนฟิกไว้ใน environment

*คอนฟิก(config)* ของแอพคือทุกอย่างที่เหมือนจะแต่งต่างระหว่าง [การติดตั้ง](./codebase) (staging, production, developer environments, etc).  โดยรวมถึง:

* ทรัพยากรจัดการกับฐานข้อมูล Memcached หรืออื่นๆ  [backing services](./backing-services)
* Credentials สำหรับติดต่อไปยังเซอร์วิสภายนอก เช่น Amazon S3 หรือ Twitter
* ค่าที่ใช้สำหรับการติดตั้ง เช่น ชื่อของที่ตั้งโฮส(Canonical host name) สำหรับในการติดตั้ง

แอพที่เก็บคอนฟิกไว้ใน constants ภายในโค้ดนั้นถือว่าขัดต่อ twelve-factor, ซึ่งจำเป็นต้องแยก **ต้องแยกคอนฟิกออกจากโค้ดอย่างชัดเจน**.  คอนฟิกนั้นจะต่างกันในแต่ละการติดตั้ง แต่ว่าโค้ดจะไม่แตกต่างกัน

วิธีการตรวจสอบว่าแอพใดๆ นั้นมีการจัดเก็บคอนฟิกแยกออกจากโค้ดนั้นสามารถตรวจสอบโดยคิดว่าถ้าหากเปิดโค้ดดูในเวลาใดๆ จะต้องไม่มีการมีการเก็บ credentials ไว้ในโค้ด 

เพื่อความเข้าใจตรงกัน ความหมายของ "คอนฟิก"  **ไม่ได้** รวมถึงคอนฟิกในภายแอพเช่น `config/routes.rb` ใน Rails, หรือ วิธี [เชื่อมต่อของโมดูลในโค้ด ](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html) ใน [Spring](http://spring.io/).  คอนฟิกชนิดนี้ไม่ได้แตกต่างกันในแต่ละการติดตั้ง ซึ่งการเก็บคอนฟิกชนิดนี้ไว้ในโค้ดนั้นดีที่สุดแล้ว

อีกวิธีหนึ่งของการคอนฟิกคือการใช้คอนฟิกที่ไม่เก็บอยู่ในระบบควบคุมเวอร์ชั่น (revision control) เช่น `config/database.yml` ใน Rails. วิธีนี้เป็นการพัฒนาอย่างมากเมื่อเทียบการเก็บคอนฟิกไว้ใน constant ซึ่งจะเข้าไปอยู่ใน repo แต่ก็ถึอว่ายังมีข้อเสียอยู่: นักพัฒนาอาจเผลอนำเข้าไปอยู่ใน repo; ทำให้มีแนวโน้มที่คอนฟิกจะถูกเก็บในหลายๆ ที่ หลายๆ ฟอร์แมท, ยากที่จะเห็นและจัดการคอนฟิกภายในที่เดียว  นอกจากนี้ฟอร์แมทของคอนฟิกมีแนวโน้มที่จะเป็นไปตามรูปแบบของภาษา หรือ framework

**แอพ twelve-factor เก็บคอนฟิกไว้ใน *environment variables*** (หรือเรียกสั้นๆ ว่า *env vars* หรือ *env*).  ตัวแปร Env นั้นแก้ไขง่ายในแต่ละการติดตั้งโดยไม่จำเป็นต้องแก้ไขโค้ดใดๆ ซึ่งต่างจากการใช้ไฟล์คอนฟิกซึ่งมีโอกาสที่จะถูกนำเข้าไปอยู่ใน repo โดยความบังเอิญ; และไม่เหมือนคอนฟิกไฟล์ที่ทำขึ้นเอง, หรือวิธีการคอนฟิกอื่นๆ เช่น Java System Properties, ตัวแปร Env ไม่ขึ้นอยู่กับมาตรฐานของภาษาหรือ os ใดๆ

อีกมุมมองของการจัดการคอนฟิกคือการจัดกลุ่มคอนฟิก  บางครั้งแอพแบ่งคอนฟิกโดยการตั้งชื่อกลุ่ม (ซึ่งเรียกว่า "environments") ตามการติดตั้งแต่ละที่, ยกตัวอย่างเช่น `development`, `test`, และ `production` environments ใน Rails.  วิธีนี้ไม่ได้สเกลอย่างเรียบร้อยนัก: ยิ่งมีการติดตั้งแอพมากขึ้น ชื่อของ environment ยิ่งเป็นสิ่งจำเป็น เช่น  `staging` หรือ `qa`.  และเมื่อโปรเจคโตขึ้นไปอีก นักพัฒนาอาจจะเพิ่ม environments ของตัวเองไปอีก เช่น  `joes-staging`, ซึ่งจะส่งผลให้เกิดคอนฟิกจำนวนมากทำให้การจัดการการติดตั้งแอพนั่นมีความเปราะบางมาก

ในแอพ twelve-factor ตัวแปร env นั้นมีการควบคุมเป็นเอกเทศและแยกตัวจากตัวแปร env อื่นๆ โดยจะไม่มีการจับกลุ่มรวมกันและแบ่งเป็นแต่ละ "environments" แต่ว่าจะจัดการแบบเอกเทศในการติดตั้งแต่ละครั้ง  รูปแบบวิธีการนี้จะทำให้สเกลได้อย่างราบลื่นไปตามธรรมชาติของแอพ ซึ่งจะขยายตัวไปตามการติดตั้งไปตลอดช่วงชีวิตของแอพพลิเคชั่นนั้นๆ
